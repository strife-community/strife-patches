<?xml version="1.0" encoding="UTF-8"?>
<ability
	name="Ability_Claudessa2"

	icon="icon.tga"
	
	anim="ability_2"
	casttime="700"
	castactiontime="200"
	casteffect="effects/cast.effect"
	
	showareacast="true"
	areacastmaterial="/shared/materials/area_cast_indicator_spokes.material"
	
	maxlevel="4"
	requiredlevel="1,3,5,7"

	actiontype="target_entity"
	targetscheme="ally_heroes"
	casteffecttype=""
	
	manacost="80,90,100,110"
	cooldowntime="14000"
	
	range="600"
	
	doubleactivate="true"
	doubleactivatenoninterrupting="true"

>
	<constant name="heal" value="100,135,170,205" adjustment="power_support" />
	<constant name="resistance" value="3,6,9,12" adjustment="none" />

	<onlearn>
		<expirestate name="State_Claudessa_Ability2_NoPassive" target="source_entity" />
		<applystate name="State_Claudessa_Ability2_NoPassive" continuous="true" target="source_entity" />
	</onlearn>

	<onupgrade>
		<expirestate name="State_Claudessa_Ability2_NoPassive" target="source_entity" />
		<applystate name="State_Claudessa_Ability2_NoPassive" continuous="true" target="source_entity" />
	</onupgrade>

	<onrespawn>
		<applystate name="State_Claudessa_Ability2_NoPassive" continuous="true" target="source_entity" />
	</onrespawn>
	
	<onimpact>
		<getconstant name="heal" />
		<heal target="target_entity" a="1" b="result" op="mult" effecttype="Assist"/>
		<spawnprojectile name="Projectile_Claudessa_Ability2" target="target_entity" offset="-25 0 0"/>
		<setproxy />
		<compare a="target_entity" b="source_entity" op="ne" >
			<expirestate name="State_Claudessa_Ability2_NoPassive" target="source_entity" />
			<applystate name="State_Claudessa_Ability2_Self" duration="5000" target="source_entity" />
		</compare>
	</onimpact>
	
	<ondoubleactivate>
		<areaofeffect
			radius="700"
			targetselection="closest"
			targetscheme="ally_heroes"
			maxtotalimpacts="1"
			effecttype="Magic"
		>
			<useability source="source_entity" slot="1"/>
		</areaofeffect>
		<compare a="result" b="0" op="eq">
			<cancel />
		</compare>
	</ondoubleactivate>

</ability>
